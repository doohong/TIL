# Effective Java

# 목차
- 1-1 생성자 대신 static 팩토리 메소드 사용을 고려하자

# 생성자 대신 static 팩토리 메소드 사용을 고려하자

## 생성자
객체 기반의 프로그래밍을 하다보면 객체를 생성하여야 한다. 객체를 생성한다를 다른 표현으로 인스턴스를 생성한다라고 하며 해당 클래스의 객체를 생성하기 위해서는 public 생성자가 제공되어야 한다.
아래는 일반적인 객체 생성의 예이다.
```java
Car car = new Car();
```
위와 같이 객체를 생성하기 위해서는 Car 클래스에 public 생성자가 필요하다는 것이다.
책에서는 생성자 대신 static 팩토리 메소드 사용을 고려하자는데 이게 무슨 말인지 알아보자.
## static 팩토리 메소드
```java
public static Boolean valueOf(boolean b){ 
    return b ? Boolean.TRUE : Boolean.FALSE; 
    }
```
위에 코드는 책에 나오는 예제이다.
클래스에서는 생성자를 대신하거나, 또는 생성자에 부가하여 static 팩토리 메소드를 가질 수 있다.
static 팩토리 메소드를 제공하면 다음과 같은 장단점이 있다.
## 장점
1. 생성자와 달리 자기 나름의 이름을 가질 수 있다.
- 생성자는 클래스 이름과 동일해야 한다. static 팩토리 메소드를 사용하면 얼마든지 매개변수와 반환 객체를 잘 표현할 수 있는 메소드 네이밍이 가능하다.

2. 생성자와 달리 호출될 때마다 매번 새로운 객체를 생성할 필요가 없다.
- 불변 클래스의 경우 이미 생성된 인스턴스를 다시 사용할 수 있으며, 불필요하게 중복된 인스턴스들이 생성되는 것을 방지하기 위해 이미 생성된 인스턴스들을 저장했다가 반복 사용할 수 있다.
- static 팩토리 메소드는 여러번 호출되더라도 이미 생성된 동일 객체를 반환할 수 있으며 이 기법은 Flyweight 패턴과 유사하다.

3. 자신의 클래스 인스턴스만 반환하는 생성자와 달리 static 팩토리 메소드는 자신이 반환하는 타입의 어떤 서브타입 객체도 반환할 수 있다.
- 반환되는 객체의 클래스를 선택 해야 할 때 뛰어난 유연성을 제공한다.

## 단점

1. 인스턴스 생성을 위해 static 팩토리 메소드만 갖고 있으면서 public이나 protected 생성자가 없는 클래스의 경우는 서브 클래스를 가질 수 없다.
- 하지만 이런 단점이 장점이 될 수도 있다. 프로그래머들이 상속 대신 컴포지션을 사용하게끔 해 주기 때문이다.

2. 다른 static 메소드와 쉽게 구별 할 수 없다.
- API 문서에서 static 팩토리 메소드를 쉽게 알 수 있도록 javadoc에서 언젠가 해주겠지만 그전에는 주석으롶 표시를 하거나 공통적인 작명 규칙을 만들고 지킴으로써 이러한 단점을 줄일 수 있다.
 - valueOf - 자신의 매개변수와 같은 값을 갖는 인스턴스를 반환한다. 이런 static 팩토리는 타입을 변환하는 메소드 이다.
 - of - valueOf를 줄인 형태의 이름이며, EnumSet에서 사용한다.
 - getInstance - 매개변수에 나타난 인스턴스를 반환하지만, 매개변수와 같은 값을 갖지 않을 수도 있다. singleton의 경우 매개변수는 없으며 오직 하나의 인스턴스만 반환
 - newInstance - getInstance와 유사하나 반환되는 각 인스턴스가 서로 다르다.
 - getType - getInstance와 유사하나 팩토리 메소드가 다른 클래스에 있을 때 사용한다. 여기서 Type은 팩토리 메소드에서 반환되는 객체의 타입을 나타낸다.
 - newType - newInstance와 유사하나 팩토리 메소드가 다른 클래스에 있을 때 사용한다. 여기소 Type은 팩토리 메소드에서 반환되는 객체의 타입을 나타낸다.

## 요약
static 팩토리 메소드와 public 생성자는 모두 나름의 용도가 있으므로 상호간의 장점을 아는 것이 중요하다. 대게 static 팩토리 메소드가 더 좋을때가 많으므로 고려하지 않고 public 생성자를 사용하는 습관을 피하자 
